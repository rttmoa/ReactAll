---
title: 自定义API
description: 如果华炎魔方自动生成的标准API不能满足业务需求，可以编写自定义API，在服务端处理业务数据。
---

## 路由定义 .router.js

* 文件名称必须以 `.router.js` 结尾, 比如: `xxx.router.js`
* 文件必须使用 `exports.default `导出一个 [express.Router](http://expressjs.com/en/4x/api.html#router) 的实例

### 简单路由示例

```javascript
  const express = require("express");
  const router = express.Router();

  router.get('/my/api/test', async function (req, res) {
      res.status(200).send({message: 'test ok'});
  });
  exports.default = router;
```

### 需登录认证的路由示例

* 认证处理器: `core.requireAuthentication`, 认证成功, 则可以在req中获取到当前用户信息`req.user` ; 认证失败, 则会返回401错误

```javascript
const express = require("express"); 
const router = express.Router(); 
const core = require('@steedos/core');
router.get('/my/api/need_auth', core.requireAuthentication, async function (req, res) { 
    res.status(200).send({ message: 'test ok' }); 
}); 
exports.default = router;
```

## 创建 router 文件

* 1、打开命令面板，在输入框中输入“Steedos:”,则会出现可选的命令列表，选择“Create Router”

 ![](https://console.steedos.cn/api/files/images/kZ2Jt5kudWSdf6Enj)

* 2、输入router 文件名称，输入回车

 ![](https://console.steedos.cn/api/files/images/SknrBDaysG489mfbi)

* 3、选择将要生成的目录

 ![](https://console.steedos.cn/api/files/images/kY2Ap4kz3t4AcAWbM)

* 4、生成的router文件内容如图所示

 ![](https://console.steedos.cn/api/files/images/5vBLCTwFtLFoLWmGK)
