{
    "type": "page",
    "body": [
        {
            "type": "service",
            "className": "col-span-2 m-0",
            "id": "tabs-options-service",
            "affixFooter": false,
            "api": {
                "method": "post",
                "url": "${context.rootUrl}/graphql",
                "adaptor": "let data = payload.data;\ndata.tabs_options = [];\nif (data.options && data.options.length) {\n  data.tabs_options = data.options.map(function (option) { \n    option.label = option.label + \"(\" + option.value + \")\";\n    return option;\n  });\n}\ndelete data.options\npayload.data = data;\nreturn payload;\n",
                "data": {
                    "query": "{options:tabs{_id label:label value:name,type,object,desktop,mobile}}"
                },
                "headers": {
                    "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                }
            },
            "placeholder": "-",
            "messages": {},
            "body": [
                {
                    "className": "steedos-amis-form",
                    "type": "form",
                    "mode": "normal",
                    "persistData": false,
                    "canAccessSuperData": false,
                    "promptPageLeave": true,
                    "name": "form_edit_${recordId}",
                    "title": "",
                    "api": {
                        "method": "post",
                        "url": "${context.rootUrl}/graphql",
                        "data": {
                            "$": "$$",
                            "recordId": "${recordId}",
                            "modalName": "${modalName}",
                            "objectName": "${objectName}"
                        },
                        "requestAdaptor": "\nconst formData = api.data.$;\nconst recordId = formData.recordId;\nfor (key in formData){\n    // image、select等字段清空值后保存的空字符串转换为null。\n    if(formData[key] === ''){\n        formData[key] = null;\n    }\n}\nconst objectName = api.data.objectName;\nconst fieldsName = Object.keys(formData);\ndelete formData.created;\ndelete formData.created_by;\ndelete formData.modified;\ndelete formData.modified_by;\ndelete formData._display;\ndelete formData.tabs_options;\ndelete formData.tab_groups_options;\ndelete formData.sldsIconsOptions;\ndelete formData.recordId;\n\n// 新加字段tab_items，值同步回传到老字段tabs中兼容老UI界面\nformData.tabs = [];\nif (formData.tab_items && formData.tab_items.length) { \n    formData.tabs = formData.tab_items.map(function (item) { return item.tab_name; });\n}\n\n/*\ntab_items存储为：\ntab_items: {\n  test1:{\n    group:\"xxx\"\n  },\n  test3:{\n    group:\"yyy\"\n  }\n}\n而不是：\ntab_items: [\n  {\n    \"index\":1,\n    \"group\":\"xxx\"\n  },\n  {\n    \"index\":2,\n    \"group\":\"yyy\"\n  }\n]\n*/\nif (formData.tab_items) { \n    formData.tab_items = _.keyBy(formData.tab_items, \"tab_name\")\n    let tempIndex = 0;\n    _.each(formData.tab_items, function (n, k) {\n      tempIndex++;\n      n.index = tempIndex;\n      delete n.tab_name;\n    });\n}\n\nlet query = `mutation{record: ${objectName}__insert(doc: {__saveData}){_id}}`;\nif(recordId){\n    query = `mutation{record: ${objectName}__update(id: \"${recordId}\", doc: {__saveData}){_id}}`;\n};\ndelete formData._id;\nlet __saveData = JSON.stringify(JSON.stringify(formData));\n\napi.data = {query: query.replace('{__saveData}', __saveData)};\nreturn api;\n",
                        "responseData": {
                            "recordId": "${record._id}"
                        },
                        "adaptor": "\nif (payload.errors) {\n  payload.status = 2;\n  payload.msg = window.t ? window.t(payload.errors[0].message) : payload.errors[0].message;\n}\nreturn payload;",
                        "headers": {
                            "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                        }
                    },
                    "initApi": {
                        "method": "post",
                        "url": "${context.rootUrl}/graphql",
                        "sendOn": "!!this.recordId",
                        "adaptor": "var data = payload.data.data[0];\nif(data){\n    //初始化接口返回的字段移除字段值为null的字段\n    for (key in data){\n        if(data[key] === null){\n            delete data[key];\n        }\n    }\n};\nif (data.tab_items && !_.isArray(data.tab_items)) {\n    // 数据库中存储的是对象格式而不是数组，转换为数组用于界面显示\n    let arrTabItems = [];\n    _.each(data.tab_items, function (n, k) {\n        n.tab_name = k;\n        delete n.index;\n        arrTabItems.push(n);\n    });\n    data.tab_items = arrTabItems;\n}\npayload.data = data;\ndelete payload.extensions;\nreturn payload;\n        ",
                        "data": {
                            "query": "{data:apps(filters:[\"_id\", \"=\", \"${recordId}\"]){_id,name,code,icon_slds,visible, showSidebar, enable_nav_schema, description,tabs,tab_items,tab_groups,objects,mobile_objects,is_creator,mobile,sort,url,is_use_ie,is_use_iframe,is_new_window,on_click,auth_name,secret,is_system,from_code_id,instance_state,created,created_by:created_by__expand{_id,name},modified,modified_by:modified_by__expand{_id,name},_display{visible,is_creator,mobile,is_use_ie,is_use_iframe,is_new_window,is_system,instance_state,created,modified}}}"
                        },
                        "headers": {
                            "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                        }
                    },
                    "initFetch": true,
                    "body": [
                        {
                            "type": "tabs",
                            "id": "u:430a42f742ee",
                            "tabs": [
                                {
                                    "title": "基本信息",
                                    "body": [
                                        {
                                            "type": "wrapper",
                                            "className": "form-content",
                                            "body": [
                                                {
                                                    "type": "input-text",
                                                    "id": "u:9677ac1cc3c5",
                                                    "name": "name",
                                                    "label": "名称",
                                                    "required": true,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "labelRemark": "",
                                                    "hidden": false
                                                },
                                                {
                                                    "name": "code",
                                                    "label": "API 名称",
                                                    "required": true,
                                                    "type": "input-text",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:784ac1e92fbf"
                                                },
                                                {
                                                    "type": "service",
                                                    "body": [
                                                        {
                                                            "name": "icon_slds",
                                                            "label": "图标",
                                                            "type": "select",
                                                            "className": "m-0",
                                                            "labelClassName": "text-left",
                                                            "id": "u:d0724fe17aa7",
                                                            "required": true,
                                                            "joinValues": false,
                                                            "extractValue": true,
                                                            "labelField": "symbol",
                                                            "valueField": "symbol",
                                                            "multiple": false,
                                                            "source": "${sldsIconsOptions}",
                                                            "menuTpl": "<span class=\"flex items-center mt-0.5\">\n  <span role=\"img\" aria-label=\"smile\" class=\"anticon anticon-smile\">\n    <span class=\"slds-icon_container slds-icon-standard-${symbol|split:_|join:-}\">\n        <svg class=\"slds-icon slds-icon_x-small\" aria-hidden=\"true\">\n          <use xlink:href=\"${context.rootUrl}/assets/icons/standard-sprite/svg/symbols.svg#${symbol}\"></use>\n        </svg>\n    </span>\n  </span>\n  <span class=\"pl-1.5\">${symbol}</span>\n</span>"
                                                        }
                                                    ],
                                                    "id": "u:420b0162ce2c",
                                                    "api": {
                                                        "method": "get",
                                                        "url": "${context.rootUrl}/ui.icons.json",
                                                        "requestAdaptor": "",
                                                        "adaptor": "if (payload && payload.length) {\n  let data = {};\n  let sldsStandardIcons = _.find(payload, { name: \"standard\" });\n  sldsStandardIcons = sldsStandardIcons && sldsStandardIcons.icons;\n  data.sldsIconsOptions = sldsStandardIcons;\n  payload.data = data;\n}\nreturn payload;\n",
                                                        "headers": {
                                                            "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                                        }
                                                    },
                                                    "messages": {}
                                                },
                                                {
                                                    "name": "sort",
                                                    "label": "排序",
                                                    "type": "input-number",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:fc07a5376a46"
                                                },
                                                {
                                                    "name": "is_creator",
                                                    "label": "在桌面中显示此应用",
                                                    "type": "checkbox",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:8dc6d3e8521d",
                                                    "tpl": null
                                                },
                                                {
                                                    "name": "mobile",
                                                    "label": "在手机上显示此应用",
                                                    "type": "checkbox",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:c9ffb7fd0610",
                                                    "tpl": null
                                                },
                                                {
                                                    "name": "visible",
                                                    "label": "启用",
                                                    "type": "checkbox",
                                                    "tpl": null,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:07a8a4c5f875"
                                                },
                                                {
                                                    "name": "showSidebar",
                                                    "label": "显示左侧导航",
                                                    "type": "checkbox",
                                                    "tpl": null,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:07a8a4c5f877"
                                                },
                                                {
                                                    "name": "enable_nav_schema",
                                                    "label": "启用自定义导航",
                                                    "required": false,
                                                    "type": "checkbox",
                                                    "tpl": null,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "clearValueOnHidden": true,
                                                    "fieldName": "enable_nav_schema"
                                                },
                                                {
                                                    "name": "description",
                                                    "label": "描述",
                                                    "type": "textarea",
                                                    "className": "col-span-2 m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:40d99f2da55a",
                                                    "tpl": "<b><%=data.description%></b>"
                                                }
                                            ],
                                            "id": "u:0b870f195836",
                                            "size": "none"
                                        }
                                    ],
                                    "id": "u:b5b8d4915890"
                                },
                                {
                                    "title": "选项卡",
                                    "body": [
                                        {
                                            "type": "wrapper",
                                            "body": [
                                                {
                                                    "name": "tab_items",
                                                    "required": true,
                                                    "type": "crud",
                                                    "strictMode": true,
                                                    "affixHeader": false,
                                                    "editable": true,
                                                    "addable": false,
                                                    "removable": true,
                                                    "draggable": false,
                                                    "columns": [
                                                        {
                                                            "name": "index",
                                                            "label": "序号",
                                                            "type": "static",
                                                            "value": "${index + 1}",
                                                            "className": "w-10",
                                                            "id": "u:c59784421c37"
                                                        },
                                                        {
                                                            "name": "tab_name_label",
                                                            "label": "选项卡",
                                                            "type": "tpl",
                                                            "id": "u:b95c69a1cd84",
                                                            "tpl": "${tabs_options|filter:value:equals:tab_name|pick:label}"
                                                        },
                                                        {
                                                            "name": "group",
                                                            "label": "分组",
                                                            "id": "u:e532b1949676",
                                                            "quickEdit": {
                                                                "type": "select",
                                                                "name": "group",
                                                                "className": "m-0",
                                                                "onEvent": {
                                                                    "change": {
                                                                        "actions": [
                                                                            {
                                                                                "actionType": "custom",
                                                                                "script": "const tabGroupKey = \"group\";\nconst getTabsSortFun = function (groupNames) {\n  return function (m, n) {\n    var tempM = !!m[tabGroupKey] ? 1 : 0;\n    var tempN = !!n[tabGroupKey] ? 1 : 0;\n    if (!m[tabGroupKey] || !n[tabGroupKey]) {\n      // 没有配置group属性的字段排在前面\n      return tempM - tempN;\n    }\n    // 字段所属分组不在groupNames时排在前面，其他字段按其所属分组在groupNames中的排序先后顺序排序，所属分组相同的字段排在一起。\n    return groupNames.indexOf(m[tabGroupKey]) - groupNames.indexOf(n[tabGroupKey]);\n  };\n}\n\nconst clearTabs = function (input) {\n  return {\n    tab_items: []\n  }\n}\n\n// 字段列表每一列数据变量时立即同步值到表单中\nconst quickEidtSaveForTab = function (input, prop_name) {\n  const currentPropValue = input.value;\n  const rowValue = input.__super;\n  const formValue = input.__super.__super.__super;\n  const tab_name = rowValue.tab_name;\n  rowValue[prop_name] = currentPropValue;\n  delete rowValue.index;\n  let newTabs = formValue.tab_items.map(function (item) {\n    if (item.tab_name == tab_name) {\n      return Object.assign({}, item, rowValue);\n    }\n    else {\n      return item;\n    }\n  });\n  const tabGroups = input.__super.__super.tab_groups;\n  const groupNames = _.compact(_.map(tabGroups, \"group_name\"));\n  if (groupNames && groupNames.length) {\n    // tabs重新按分组排序\n    newTabs.sort(getTabsSortFun(groupNames));\n  }\n  return {\n    tab_items: newTabs\n  }\n}\n\nconst eventData = event.data;\ndoAction({\n  actionType: 'setValue',\n  componentId: \"apps-form\",\n  args: {\n    value: clearTabs()\n  }\n});\n\nconst newTabTtemsProp = quickEidtSaveForTab(eventData, \"group\");\n\nsetTimeout(function () { \n  // 不加延时会显示异常\n  doAction({\n    actionType: 'setValue',\n    componentId: \"apps-form\",\n    args: {\n      value: newTabTtemsProp\n    }\n  });\n},300);"
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "source": "${tab_groups|pick:group_name}",
                                                                "checkAll": false,
                                                                "selectFirst": false,
                                                                "searchable": true,
                                                                "clearable": true,
                                                                "id": "u:8b3d6979e884",
                                                                "multiple": false,
                                                                "mode": "popOver"
                                                            },
                                                            "placeholder": "-"
                                                        },
                                                        {
                                                            "name": "tab_name_desktop",
                                                            "label": "桌面",
                                                            "type": "tpl",
                                                            "id": "u:b95c69a1cd84",
                                                            "tpl": "${tabs_options|filter:value:equals:tab_name|first|pick:desktop|isTrue:'✔':'✘'}",
                                                            "placeholder": "-",
                                                            "remark": "显示在桌面菜单中"
                                                        },
                                                        {
                                                            "name": "tab_name_mobile",
                                                            "label": "手机",
                                                            "type": "tpl",
                                                            "id": "u:b95c69a1cd84",
                                                            "tpl": "${tabs_options|filter:value:equals:tab_name|first|pick:mobile|isTrue:'✔':'✘'}",
                                                            "placeholder": "-",
                                                            "remark": "显示在手机菜单中"
                                                        }
                                                    ],
                                                    "className": "col-span-2 m-0",
                                                    "labelClassName": "text-left",
                                                    "source": "${tab_items}",
                                                    "footable": false,
                                                    "headerToolbar": [
                                                        {
                                                            "type": "button",
                                                            "label": "生成选项卡",
                                                            "id": "u:a35a2276145d",
                                                            "tpl": "内容",
                                                            "onEvent": {
                                                                "click": {
                                                                    "actions": [
                                                                        {
                                                                            "actionType": "custom",
                                                                            "script": "const appId = null;\nconst page = Steedos.Page.getPage('app', appId, null, null, \"generate_object_tabs\");\nif (page && page.schema) {\n  const pageSchema = JSON.parse(page.schema);\n  let formSchema = pageSchema.body[0];\n  // 设置form的canAccessSuperData属性防止弹出窗口从父级取字段默认值\n  formSchema.canAccessSuperData = false;\n  // 设置form的wrapWithPanel属性隐藏其底部保存取消按钮\n  formSchema.wrapWithPanel = false;\n  formSchema.className = \"steedos-amis-form\";\n  const title = \"选择需要生成选项卡的对象\";\n  doAction({\n    \"actionType\": \"dialog\",\n    \"dialog\": {\n      \"type\": \"dialog\",\n      \"title\": title,\n      \"body\": formSchema,\n      \"size\": \"lg\"\n    }\n  });\n}"
                                                                        }
                                                                    ],
                                                                    "weight": 0
                                                                }
                                                            }
                                                        },
                                                        {
                                                            "type": "button",
                                                            "label": "设置选项卡",
                                                            "id": "u:853b890ab524",
                                                            "actionType": "dialog",
                                                            "dialog": {
                                                                "type": "dialog",
                                                                "title": "设置选项卡",
                                                                "body": [
                                                                    {
                                                                        "type": "transfer",
                                                                        "name": "picked_tabs",
                                                                        "value": "${tab_items|pick:tab_name}",
                                                                        "sortable": true,
                                                                        "source": "${tabs_options}",
                                                                        "searchable": true,
                                                                        "id": "u:f2d36873abd1"
                                                                    }
                                                                ],
                                                                "onEvent": {
                                                                    "confirm": {
                                                                        "actions": [
                                                                            {
                                                                                "actionType": "custom",
                                                                                "script": "const tabGroupKey = \"group\";\nconst getTabsSortFun = function (groupNames) {\n  return function (m, n) {\n    var tempM = !!m[tabGroupKey] ? 1 : 0;\n    var tempN = !!n[tabGroupKey] ? 1 : 0;\n    if (!m[tabGroupKey] || !n[tabGroupKey]) {\n      // 没有配置group属性的字段排在前面\n      return tempM - tempN;\n    }\n    // 字段所属分组不在groupNames时排在前面，其他字段按其所属分组在groupNames中的排序先后顺序排序，所属分组相同的字段排在一起。\n    return groupNames.indexOf(m[tabGroupKey]) - groupNames.indexOf(n[tabGroupKey]);\n  };\n}\n\nconst clearTabs = function (input) { \n  return {\n    tab_items: []\n  }\n}\n\nconst convertDataForTabs = function (input) { \n  let pickedTabs = input.picked_tabs || [];\n  const superTabs = _.keyBy(input.__super.tab_items, 'tab_name');\n  if (typeof pickedTabs === \"string\") {\n    pickedTabs = pickedTabs.split(\",\");\n  }\n  const tabOptions = _.keyBy(input.__super.__super.__super.__super.__super.tabs_options, \"value\");\n  const convertedTabs = pickedTabs.map(function (tab_name) {\n    const superTab = superTabs[tab_name];\n    if (superTab) {\n      return superTab;\n    }\n    else {\n      const tabOption = tabOptions[tab_name];\n      return {\n        tab_name: tab_name,\n        group: tabOption.group\n      }\n    }\n  });\n  const tabGroups = input.__super.__super.__super.__super.__super.tab_groups;\n  const groupNames = _.compact(_.map(tabGroups, \"group_name\"));\n  // tabs重新按分组排序\n  if (groupNames && groupNames.length) { \n    convertedTabs.sort(getTabsSortFun(groupNames));\n  }\n  return {\n    tab_items: convertedTabs\n  }\n}\n\nconst eventData = event.data;\ndoAction({\n  actionType: 'setValue',\n  componentId: \"apps-form\",\n  args: {\n    value: clearTabs()\n  }\n});\n\ndoAction({\n  actionType: 'setValue',\n  componentId: \"apps-form\",\n  args: {\n    value: convertDataForTabs(eventData)\n  }\n});\n\n"
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "size": "lg",
                                                                "id": "u:9c93896a73cf",
                                                                "closeOnEsc": false,
                                                                "closeOnOutside": false,
                                                                "showCloseButton": true
                                                            }
                                                        },
                                                        {
                                                            "type": "button",
                                                            "id": "u:ec9931ea883c",
                                                            "label": "设置分组",
                                                            "actionType": "dialog",
                                                            "dialog": {
                                                                "title": "设置分组",
                                                                "body": [
                                                                    {
                                                                        "type": "input-table",
                                                                        "name": "setting_groups",
                                                                        "value": "${tab_groups}",
                                                                        "addable": true,
                                                                        "draggable": true,
                                                                        "editable": true,
                                                                        "columns": [
                                                                            {
                                                                                "name": "group_name",
                                                                                "label": "名称",
                                                                                "id": "u:383c7744b499"
                                                                            }
                                                                        ],
                                                                        "removable": true,
                                                                        "id": "u:06bbf5c4dc98"
                                                                    }
                                                                ],
                                                                "onEvent": {
                                                                    "confirm": {
                                                                        "actions": [
                                                                            {
                                                                                "actionType": "custom",
                                                                                "script": "const tabGroupKey = \"group\";\nconst getTabsSortFun = function (groupNames) {\n  return function (m, n) {\n    var tempM = !!m[tabGroupKey] ? 1 : 0;\n    var tempN = !!n[tabGroupKey] ? 1 : 0;\n    if (!m[tabGroupKey] || !n[tabGroupKey]) {\n      // 没有配置group属性的字段排在前面\n      return tempM - tempN;\n    }\n    // 字段所属分组不在groupNames时排在前面，其他字段按其所属分组在groupNames中的排序先后顺序排序，所属分组相同的字段排在一起。\n    return groupNames.indexOf(m[tabGroupKey]) - groupNames.indexOf(n[tabGroupKey]);\n  };\n}\n\nconst clearTabs = function (input) {\n  return {\n    tab_items: []\n  }\n}\n\n// 把”设置分组“弹出窗口中设置的分组转为主表单groups字段值格式\n// 同时根据新的groups排序重新设置tabs属性的字段先后次序\n// 因为直接设置tabs值有bug，即新值老值会串，所以需要先执行上面的clearTabs清除原来的值\nconst convertDataForGroups = function(input) {\n  const settingGroups = input.setting_groups || [];\n  const convertedGroups = _.uniqBy(settingGroups.map(function (item) {\n    return {\n      group_name: item.group_name\n    }\n  }), \"group_name\");\n\n  const groupNames = _.compact(_.map(convertedGroups, \"group_name\"));\n  const tab_items = input.__super.__super.items;\n  // tabs重新按分组排序\n  tab_items.sort(getTabsSortFun(groupNames));\n\n  return {\n    tab_groups: convertedGroups,\n    tab_items: tab_items\n  }\n};\n\nconst eventData = event.data;\ndoAction({\n  actionType: 'setValue',\n  componentId: \"apps-form\",\n  args: {\n    value: clearTabs()\n  }\n});\n\ndoAction({\n  actionType: 'setValue',\n  componentId: \"apps-form\",\n  args: {\n    value: convertDataForGroups(eventData)\n  }\n});\n\n"
                                                                            }
                                                                        ]
                                                                    }
                                                                },
                                                                "type": "dialog",
                                                                "size": "lg",
                                                                "id": "u:55db530e3f86",
                                                                "closeOnEsc": false,
                                                                "closeOnOutside": false,
                                                                "showCloseButton": true
                                                            }
                                                        }
                                                    ],
                                                    "headerToolbarClassName": "px-1 py-3",
                                                    "id": "crud_tab_items",
                                                    "perPageAvailable": [
                                                        10
                                                    ],
                                                    "messages": {},
                                                    "visible": "typeof this.visibleOn === \"string\" ? 2 : 1",
                                                    "visibleOn": " !!this.tabs_options"
                                                }
                                            ],
                                            "id": "u:d5b736e2a2f5",
                                            "size": "none"
                                        }
                                    ],
                                    "id": "u:989a6aa9b805"
                                },
                                {
                                    "title": "外接应用",
                                    "body": [
                                        {
                                            "type": "wrapper",
                                            "className": "form-content",
                                            "body": [
                                                {
                                                    "name": "url",
                                                    "label": "外部链接",
                                                    "type": "input-text",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:d7116a113670"
                                                },
                                                {
                                                    "name": "is_use_ie",
                                                    "label": "使用IE打开(需使用Steedos桌面客户端)",
                                                    "type": "checkbox",
                                                    "tpl": null,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:44fa8ee006c1"
                                                },
                                                {
                                                    "name": "is_use_iframe",
                                                    "label": "使用iframe打开",
                                                    "type": "checkbox",
                                                    "tpl": null,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:ba806048fa36"
                                                },
                                                {
                                                    "name": "is_new_window",
                                                    "label": "在新窗口打开",
                                                    "type": "checkbox",
                                                    "tpl": null,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:150163f04699"
                                                },
                                                {
                                                    "name": "on_click",
                                                    "label": "链接脚本",
                                                    "type": "textarea",
                                                    "tpl": "<b><%=data.on_click%></b>",
                                                    "className": "col-span-2 m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:0fe6df9cc818"
                                                },
                                                {
                                                    "name": "auth_name",
                                                    "label": "验证域名",
                                                    "type": "input-text",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:b084c94a8219"
                                                },
                                                {
                                                    "name": "secret",
                                                    "label": "API 密钥",
                                                    "type": "input-text",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:8a56de0be5bb"
                                                }
                                            ],
                                            "size": "none",
                                            "id": "u:09713a014209"
                                        }
                                    ],
                                    "id": "u:17ecc1ec4435"
                                },
                                {
                                    "title": "其他",
                                    "body": [
                                        {
                                            "type": "wrapper",
                                            "className": "form-content",
                                            "body": [
                                                {
                                                    "name": "objects",
                                                    "label": "桌面主菜单(已作废)",
                                                    "type": "select",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:4e5047e44905",
                                                    "joinValues": false,
                                                    "extractValue": true,
                                                    "labelField": "label",
                                                    "valueField": "value",
                                                    "multiple": true,
                                                    "checkAll": false,
                                                    "searchable": true,
                                                    "source": {
                                                        "method": "get",
                                                        "url": "${context.rootUrl}/service/api/amis-metadata-objects/objects/options",
                                                        "headers": {
                                                            "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                                        }
                                                    }
                                                },
                                                {
                                                    "name": "mobile_objects",
                                                    "label": "手机主菜单(已作废)",
                                                    "type": "select",
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:cfaeb2f857a8",
                                                    "joinValues": false,
                                                    "extractValue": true,
                                                    "labelField": "label",
                                                    "valueField": "value",
                                                    "multiple": true,
                                                    "checkAll": false,
                                                    "searchable": true,
                                                    "source": {
                                                        "method": "get",
                                                        "url": "${context.rootUrl}/service/api/amis-metadata-objects/objects/options",
                                                        "messages": {},
                                                        "headers": {
                                                            "Authorization": "Bearer ${context.tenantId},${context.authToken}"
                                                        }
                                                    }
                                                },
                                                {
                                                    "name": "enable_nav_schema",
                                                    "label": "启用自定义导航",
                                                    "type": "checkbox",
                                                    "tpl": null,
                                                    "className": "m-0",
                                                    "labelClassName": "text-left",
                                                    "id": "u:07a8a4c5f89"
                                                }
                                            ],
                                            "size": "none"
                                        }
                                    ]
                                }
                            ],
                            "tabsMode": "line",
                            "className": "",
                            "contentClassName": ""
                        }
                    ],
                    "panelClassName": "m-0 -mt-3",
                    "actions": false,
                    "actionsClassName": "p-sm b-t b-light text-center",
                    "affixFooter": false,
                    "debug": false,
                    "onEvent": {
                        "inited": {
                            "actions": [
                                {
                                    "actionType": "custom",
                                    "script": "const data = context.props.data;\nif (!data._id) { \n  return;\n}\nif (data.tab_items) {\n  return;\n}\n\nconst tabOptions = data.tabs_options || [];\nconst tabItems = [];\n// 把应用中原来tabs属性值添加到新的tab_items属性的默认值中\nif (data.tabs && data.tabs.length) {\n  data.tabs.forEach(function (item) {\n    tabItems.push({ tab_name: item });\n  });\n}\nconst pushObjectsToTabItems = function (objects) {\n  objects.forEach(function (item) {\n    // 已经有绑定到指定对象的选项卡就不添加\n    let existObjectItem = !!tabItems.find(function (tabItem) {\n      return !!tabOptions.find(function (option) {\n        return tabItem.tab_name === tabItem.value && option.object === item;\n      });\n    });\n    if (existObjectItem) {\n      return;\n    }\n    // 找到指向指定对象的选项卡\n    let tempOption = tabOptions.find(function (option) {\n      return option.type === \"object\" && option.object === item;\n    });\n    if (!tempOption) {\n      return;\n    }\n    // 选项卡名称如果重复了就不添加\n    let existTabItem = !!tabItems.find(function (tabItem) {\n      return tabItem.tab_name === tempOption.value;\n    });\n    if (existTabItem) {\n      return;\n    }\n    if (tempOption) {\n      tabItems.push({ tab_name: tempOption.value });\n    }\n  });\n}\n// 把应用中原来objects属性值添加到新的tab_items属性的默认值中\nif (data.objects && data.objects.length) {\n  pushObjectsToTabItems(data.objects);\n}\n// 把应用中原来mobile_objects属性值添加到新的tab_items属性的默认值中\nif (data.mobile_objects && data.mobile_objects.length) {\n  pushObjectsToTabItems(data.mobile_objects);\n}\n\ndoAction({\n  actionType: 'setValue',\n  args: {\n    \"value\": { tab_items: tabItems }\n  }\n});"
                                }
                            ]
                        },
                        "submitSucc": {
                            "weight": 0,
                            "actions": [
                              {
                                "actionType": "broadcast",
                                "args": {
                                    "eventName": "@data.changed.apps"
                                },
                                "data": {
                                    "objectName": "apps"
                                }
                              }
                            ]
                          }
                    },
                    "id": "apps-form"
                }
            ]
        }
    ],
    "regions": [
        "body"
    ],
    "data": {
        "objectName": "apps"
    },
    "id": "u:953fda4052b6",
    "bodyClassName": "p-0",
    "name": "page_edit_${recordId}",
    "initApi": null,
    "initFetch": null
}